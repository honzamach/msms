.. _section-readme:

MSMS
================================================================================

MSMS is a server management system based on `Ansible <https://www.ansible.com/>`__ 
IT automation tool and other open-source utilities designed to create ready to use 
and easy to extend server management workflow with following features:

  * Local installation of Ansible and all other utilities within virtual environment.
  * Full power of Ansible with customized preconfigured environment
  * Batteries included: ready to use base set of server management roles
  * Role management based on Git
  * Built-in system and role documentation `Sphinx-doc <http://www.sphinx-doc.org/en/master/#>`__
  * Autogenerated server documentation based on `Sphinx-doc <http://www.sphinx-doc.org/en/master/#>`__
  * Makefile-based control utility

For full description of the MSMS architecture please refer to :ref:`section-overview`
manual page.


Prerequisites
--------------------------------------------------------------------------------

The only prerequisites are following common tools and libraries:

* make
* python3
* python3-venv


Usage
--------------------------------------------------------------------------------

Create fresh server management environment from scratch::

	# Prepare necessary directories
	$ mkdir ~/Ansible
	$ cd ~/Ansible

	# Clone the MSMS base
	$ git clone https://github.com/honzamach/msms.git msms-local
	$ cd msms-local

	# Display built-in make help
	$ make help

	# Setup fresh server management environment
	$ make msms-setup

	# Activate server management environment before executing any roles
	$ . ./venv/bin/activate
	$ make msms-on

	# Generate and view documentation locally
	$ make docs

Load existing server management environment::

	# Prepare necessary directories
	$ mkdir ~/Ansible
	$ cd ~/Ansible

	# Clone the MSMS base
	$ git clone https://github.com/honzamach/msms.git msms-local
	$ cd msms-local

	# Load existing server management environment from remote shared Git repository
	$ make msms-load META_URL=git_repository_url

	# Activate server management environment before executing any roles
	$ . ./venv/bin/activate
	$ make msms-on

	# Generate and view documentation locally
	$ make docs

Install new role::

	# Install the role from remore Git repository
	$ make role-install ROLE_URL=https://github.com/honzamach/ansible-role-cleanup.git ROLE_NAME=honzamach.cleanup

	# Enable the role within the local server management environment
	$ make roles-on

Executing server management tasks::

	# Server management environment must be enabled before executing server management tasks
	$ . ./venv/bin/activate
	$ make msms-on

	# Edit server environment configurations in ./inventory/...

	# Execute Ansible playbooks as necessary
	$ ansible-playbook role_accounts.yml
	$ ansible-playbook production role_...
	$ ansible-playbook playbook_full.yml
	$ make play-full

	# Commit and share local environment changes
	$ make msms-commit
	$ make msms-push

	# Keep the MSMS system and environment configurations up-to date
	$ make msms-upgrade

	# Disable the server management environment when you are done
	$ make msms-off
	$ deactivate

For full description of the MSMS usage please refer to :ref:`section-usage`
manual page.
