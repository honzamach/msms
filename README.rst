.. _section-readme:

MSMS
================================================================================

*MSMS* is a server management system based on |tool_ansible| IT automation tool 
and other open-source utilities designed to create ready to use and easy to 
extend server management workflow with following key features:

  * Local installation of |tool_ansible| and all other utilities within virtual environment.
  * Full power of |tool_ansible| with customized preconfigured environment.
  * Batteries included: ready-to-use base set of server management roles.
  * Role management based on |tool_git| (installation, upgrading).
  * Built-in documentation based on |tool_sphinx|.
  * Autogenerated host inventory documentation based on |tool_sphinx|.
  * Control utility based on |tool_make|.

For full description of the *MSMS* architecture please refer to :ref:`section-overview`
manual page.


Prerequisites
--------------------------------------------------------------------------------

The only prerequisites for successfull installation are following:

* make
* python3
* python3-venv


Basic usage
--------------------------------------------------------------------------------

If you are starting from scratch please follow these instructions to bootstrap
fresh server management environment::

	# Prepare necessary directories.
	$ mkdir ~/Ansible
	$ cd ~/Ansible

	# Clone the MSMS codebase.
	$ git clone https://github.com/honzamach/msms.git msms-local
	$ cd msms-local

	# Display built-in make help to review available commands.
	$ make 
	# OR explicitly:
	$ make help

	# Setup fresh server management environment.
	$ make msms-setup

	# Activate server management environment before executing any roles.
	$ . ./venv/bin/activate
	$ make msms-on

	# In case you are interested install default set of Ansible roles.
	$ make roles-install-default

	# Generate and view documentation locally for your convenience.
	$ make docs

At this point you should start defining your inventory configurations in ``inventory`` 
directory. Please study official `documentation <https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html>`__
for more details.

Another option is to start working on existing server management environment
created perhaps by one of your coworkers. In that case please follow these
instructions::

	# Prepare necessary directories.
	$ mkdir ~/Ansible
	$ cd ~/Ansible

	# Clone the MSMS codebase.
	$ git clone https://github.com/honzamach/msms.git msms-local
	$ cd msms-local

	# Display built-in make help to review available commands.
	$ make 
	# OR explicitly:
	$ make help

	# Load existing server management environment from remote shared Git repository.
	$ make msms-load META_URL=git_repository_url

	# Activate server management environment before executing any roles.
	$ . ./venv/bin/activate
	$ make msms-on

	# Generate and view documentation locally for your convenience.
	$ make docs

Install role from any |tool_git| repository::

	# Install the role from remote Git repository.
	$ make role-install ROLE_URL=https://github.com/honzamach/ansible-role-cleanup.git ROLE_NAME=honzamach.cleanup

	# Enable the role within the local server management environment.
	$ make roles-on

Executing server management tasks::

	# Server management environment must be enabled before executing server management tasks.
	$ . ./venv/bin/activate
	$ make msms-on

	# Edit server environment configurations in ./inventory/...

	# Execute Ansible playbooks as necessary.
	$ ansible-playbook role_accounts.yml --ask-vault-pass
	$ ansible-playbook production role_... --ask-vault-pass
	$ ansible-playbook playbook_full.yml --ask-vault-pass
	$ make play-full

	# Commit and share local server environment configuration changes.
	$ make msms-commit
	$ make msms-push

	# Keep the MSMS system and server environment configurations up-to date.
	$ make msms-upgrade

	# Disable the server management environment when you are done.
	$ make msms-off
	$ deactivate

For full description of the *MSMS* usage please refer to :ref:`section-usage`
manual page.


Copyright
--------------------------------------------------------------------------------

| *Copyright:* (C) since 2019 Honza Mach <honza.mach.ml@gmail.com>
| *Author:* Honza Mach <honza.mach.ml@gmail.com>
| Use of this package is governed by the MIT license, see LICENSE file.
|
